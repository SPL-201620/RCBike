
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="title">
       <h2 class="BigTopic">Venta Bicicletas</h2>
    </ui:define>

	<ui:define name="content">
		<h:form id="frmVentasBici" prependId="false">
			<p:messages id="button">
			</p:messages>
			<div class="Container100">
				<div class="ContainerIndent">
					<div class="Card ShadowEffect">
						<div class="ContainerIndent">
							<p:tabView>
								<p:tab title="Configuraciones Usuario">
									<p:panel id="pnlConfiguracionesUsuario">
										<p:dataTable var="configuraciones"
											value="#{ventaConfiguradorManager.listConfiguraciones}">
											<p:subTable var="piezas"
												value="#{configuraciones.piezasConfiguracion}">
												<f:facet name="header">
													<h:outputText value="#{configuraciones.descripcion}" />
													<p:spacer>
													</p:spacer>
													<p:commandButton value="PONER A LA VENTA" process="@this"
														onclick="#{ventasManager.actualizaIdConfiguracion(configuraciones.id)}"
														oncomplete="PF('venta').show();"
														update=":frmVentasBici:button">
													</p:commandButton>
												</f:facet>
												<p:column>
													<h:outputText value="#{piezas.tipo}" />
												</p:column>
												<p:column>
													<h:outputText value="#{piezas.descripcion}" />
												</p:column>
											</p:subTable>
										</p:dataTable>
									</p:panel>
								</p:tab>
								<p:tab title="Bicicletas puestas a la venta">
									<p:dataTable id="dtVentaUsuario" var="ventaUsuario"
										value="#{ventasManager.ventaWebList}">
										<p:column headerText="Marca:">
											<h:outputText value="#{ventaUsuario.marca}" />
										</p:column>
										<p:column headerText="Ciudad:">
											<h:outputText value="#{ventaUsuario.ciudadVenta}" />
										</p:column>
										<p:column headerText="Estado:">
											<h:outputText value="#{ventaUsuario.estado}" />
										</p:column>
										<p:column headerText="Valor">
											<h:outputText value="#{ventaUsuario.valor}" />
										</p:column>
										<p:column headerText="Accesorios:">
											<h:outputText value="#{ventaUsuario.accesorios}" />
										</p:column>
										<p:column headerText="Vendida?">
											<h:outputText value="#{ventaUsuario.vendida}" />
										</p:column>
										<p:column style="width:32px;text-align: center">
										</p:column>
									</p:dataTable>
								</p:tab>
								<p:tab title="Bicicletas para comprar">
									<p:dataTable id="dtCompraUsuario" var="compraUsuario"
										value="#{ventasManager.compraVentaWebList}">
										<p:column headerText="Marca:">
											<h:outputText value="#{compraUsuario.marca}" />
										</p:column>
										<p:column headerText="Ciudad:">
											<h:outputText value="#{compraUsuario.ciudadVenta}" />
										</p:column>
										<p:column headerText="Estado:">
											<h:outputText value="#{compraUsuario.estado}" />
										</p:column>
										<p:column headerText="Valor">
											<h:outputText value="#{compraUsuario.valor}" />
										</p:column>
										<p:column headerText="Accesorios:">
											<h:outputText value="#{compraUsuario.accesorios}" />
										</p:column>
										<p:column headerText="Vendida?">
											<h:outputText value="#{compraUsuario.vendida}" />
										</p:column>
										<p:column style="width:32px;text-align: center">
										</p:column>
										<p:column>
											<p:commandButton oncomplete="PF('compraDialog').show()" process="@this"
												onclick="#{ventasManager.actualizaCompraSelected(compraUsuario.emailCreador)}"
												icon="ui-icon-search" title="View">
											</p:commandButton>
										</p:column>
									</p:dataTable>
								</p:tab>
							</p:tabView>
						</div>
					</div>
				</div>
			</div>
		</h:form>
		<p:dialog header="Por favor inserte la informacion de la bicicleta"
			widgetVar="venta" modal="true">
			<h:form id="formCargaImagen">
				<p:panel collapsed="4" header="Venta de bicicleta"
					style="margin-bottom:20px">
					<h:panelGroup layout="block" rendered="#{empty ventasManager.foto}">
						<div class="EmptyBox40 Wid70" />
						<h:panelGroup layout="block" style="display: block; margin:0 auto"
							styleClass="icon-face Fs100" />
						<div class="EmptyBox40 Wid70" />
					</h:panelGroup>
					<h:panelGroup layout="block"
						rendered="#{not empty ventasManager.foto}">
						<div class="EmptyBox20 Wid70" />
						<img src="data:image/jpeg;base64,#{ventasManager.foto}"
							style="display: block; margin: 0 auto" />
						<div class="EmptyBox10 Wid70" />
					</h:panelGroup>
					<div style="display: block; margin: 0 auto">
						<p:fileUpload id="cargarImagen"
							fileUploadListener="#{ventasManager.cargarImagen}"
							mode="advanced" update="formCargaImagen" auto="true"
							label="Cargar Imagen" sizeLimit="100000"
							allowTypes="/(\.|\/)(jpe?g|png)$/" />
					</div>
				</p:panel>
			</h:form>
			<h:form id="formModalVentas">
				<p:messages id="errores"></p:messages>
				<p:panel id="pnlVentasBicicletas">
					<p:panelGrid columns="6" styleClass="Fs18">
						<h:outputText value="Valor:" />
						<p:inputNumber id="valorVentaBici1" value="#{ventasManager.valor}"
							required="true">
						</p:inputNumber>
						<h:outputText value="Poner a la venta: " />
						<p:selectBooleanButton id="value1"
							value="#{ventasManager.vendida}" onLabel="true" offLabel="false"
							style="width:60px" />
						<h:outputText value="Marca: " />
						<p:inputText id="ventaMarca" value="#{ventasManager.marca}"
							styleClass="Fs18" autocomplete="off" required="true" />
						<h:outputText value="Ciudad: " />
						<p:inputText id="ventaCiudadVenta" value="#{ventasManager.ciudad}"
							styleClass="Fs18" autocomplete="off" required="true" />
						<h:outputText value="Estado: " />
						<p:selectOneMenu id="ventaEstado" value="#{ventasManager.estado}"
							style="width:125px" required="true">
							<f:selectItem itemLabel="Select One" itemValue="" />
							<f:selectItem itemLabel="Nuevo" itemValue="Nuevo" />
							<f:selectItem itemLabel="Usado-Excelente estado"
								itemValue="Usado-Excelente estado" />
							<f:selectItem itemLabel="Usado-Buen estado"
								itemValue="Usado-Buen estado" />
							<f:selectItem itemLabel="Usado-Regular estado"
								itemValue="Usado-Regular estado" />
							<f:selectItem itemLabel="Usado-Mal estado"
								itemValue="Usado-Mal estado" />
						</p:selectOneMenu>
						<h:outputText value="Accesorios: " />
						<p:inputText id="ventaAccesorios"
							value="#{ventasManager.accesorio}" styleClass="Fs18"
							autocomplete="off" required="true" />
						<h:outputText value="Observaciones: " />
						<p:inputText id="ventaObservaciones"
							value="#{ventasManager.observaciones}" styleClass="Fs18"
							autocomplete="off" required="false" />
						<div class="Container25">
							<p:commandButton value="Insertar"
								update=":formModalVentas:errores"
								action="#{ventasManager.insertVenta}" process="@form" onclick="venta.close()"
								/>
						</div>
					</p:panelGrid>
				</p:panel>
			</h:form>
		</p:dialog>
		<p:dialog header="Gracias por usar nuestro servicio"
			widgetVar="compraDialog" modal="true">
			<h:outputText value="El contacto del vendedor es:" />
			<h:outputText value="#{ventasManager.compraSelected}" />

		</p:dialog>


	</ui:define>

</ui:composition>