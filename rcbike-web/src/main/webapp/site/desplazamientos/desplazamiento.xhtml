<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">
	<ui:define name="head">
		<script
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBfB1qF1ZdhXSYI_zBqrhRh03xy05pQfKs&amp;signed_in=true"></script>
	</ui:define>
	<ui:define name="subheader">
	</ui:define>

	<ui:define name="content">

		<div class="Container100">
			<div class="ContainerIndent">
				<div class="Card ShadowEffect">
					<h2 class="CardTopic TexAlCenter Fs30">Recorrido</h2>
					
					
					<p:growl id="messages" showDetail="true" />
					
					
						<p:gmap id="gmap" styleClass="PosRelative SoftGrayBack" center="4.656360,-74.103770" zoom="13" type="ROADMAP"
							style="width:100%; height:355px; z-index:1;" model="#{addMarkersView.emptyModel}" onPointClick="handlePointClick(event);" widgetVar="map" />

					
					
					<p:dialog widgetVar="dlg" showEffect="fade">
					    <h:form prependId="false" >
					        <h:panelGrid columns="2">
					            <h:outputLabel for="title" value="Titulo:" />
					            <p:inputText id="title" value="#{addMarkersView.title}" />
					 
					            <f:facet name="footer">
					                <p:commandButton value="Agregar" actionListener="#{addMarkersView.addMarker}" update=":messages" oncomplete="markerAddComplete()" />
					                <p:commandButton value="Cancelar" onclick="return cancel()" />
					            </f:facet>
					        </h:panelGrid>
					 
					        <h:inputHidden id="lat" value="#{addMarkersView.lat}" />
					        <h:inputHidden id="lng" value="#{addMarkersView.lng}" />
					    </h:form>
					</p:dialog>
 
<script type="text/javascript">
    var currentMarker = null;
 
    function handlePointClick(event) {
        if(currentMarker === null) {
            document.getElementById('lat').value = event.latLng.lat();
            document.getElementById('lng').value = event.latLng.lng();
 
            currentMarker = new google.maps.Marker({
                position:new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())
            });
 
            PF('map').addOverlay(currentMarker);
 
            PF('dlg').show();
        }   
    }
 
    function markerAddComplete() {
        var title = document.getElementById('title');
        currentMarker.setTitle(title.value);
        title.value = "";
 
        currentMarker = null;
        PF('dlg').hide();
    }
 
    function cancel() {
        PF('dlg').hide();
        currentMarker.setMap(null);
        currentMarker = null;
 
        return false;
    }
</script>
					
					
					
					
					
					
					
					
					
					
					
					
					
					<br />
					<br />
				</div>
			</div>
		</div>

	</ui:define>
</ui:composition>